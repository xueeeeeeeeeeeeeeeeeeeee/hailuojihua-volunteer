(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-userinfo-userinfo"],{"1a7e":function(t,n,a){"use strict";a.d(n,"b",(function(){return o})),a.d(n,"c",(function(){return e})),a.d(n,"a",(function(){}));var o=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("v-uni-view",{staticClass:"content"},[o("v-uni-image",{staticClass:"background",attrs:{"lazy-load":!0,src:a("c3c8"),mode:"aspectFill"}}),o("v-uni-view",{staticClass:"top"},[o("v-uni-view",{staticClass:"topon"},[o("v-uni-view",{staticClass:"onleft",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.changeheadpic.apply(void 0,arguments)}}},[o("v-uni-image",{attrs:{src:t.headpicurl,mode:"aspectFill"}})],1),o("v-uni-view",{staticClass:"onright"},[t.userinfo?o("p",{staticClass:"name"},[t._v(t._s(t.userinfo.username))]):t._e(),t.infodata?o("p",[t._v("ID/志愿者编号"+t._s(t.infodata.id))]):t._e()])],1),o("v-uni-view",{staticClass:"topbottom"},[o("v-uni-view",{staticClass:"shishu"},[o("h2",[t._v("志愿时数")]),o("v-uni-view",{staticClass:"sum"},[o("p",{staticClass:"lj"},[t._v("累计")]),t.infodata?o("h2",[t._v(t._s(t.infodata.currentActivitySeconds))]):t._e(),o("p",[t._v("小时")])])],1)],1)],1),0==t.pagestatus?o("v-uni-view",{staticClass:"body"},[o("v-uni-view",{staticClass:"item"},[o("p",{staticClass:"before"},[t._v("学校:")]),t.infodata?o("p",{staticClass:"after"},[t._v(t._s(t.infodata.school))]):t._e()]),o("v-uni-view",{staticClass:"item"},[o("p",{staticClass:"before"},[t._v("账号:")]),t.userinfo?o("p",{staticClass:"after"},[t._v(t._s(t.userinfo.username))]):t._e(),o("v-uni-button",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.changename.apply(void 0,arguments)}}},[t._v("编辑")])],1),o("v-uni-view",{staticClass:"item"},[o("p",{staticClass:"before"},[t._v("学号:")]),t.infodata?o("p",{staticClass:"after"},[t._v(t._s(t.infodata.studentId))]):t._e()]),o("v-uni-view",{staticClass:"item"},[o("p",{staticClass:"before"},[t._v("学院:")]),t.infodata?o("p",{staticClass:"after"},[t._v(t._s(t.infodata.college))]):t._e()]),o("v-uni-view",{staticClass:"item"},[o("p",{staticClass:"before"},[t._v("专业:")]),t.infodata?o("p",{staticClass:"after"},[t._v(t._s(t.infodata.major))]):t._e()]),o("v-uni-view",{staticClass:"item"},[o("p",{staticClass:"before"},[t._v("密码:")]),o("p",{staticClass:"after"},[t._v("********")]),o("v-uni-button",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.changepassword.apply(void 0,arguments)}}},[t._v("修改密码")])],1)],1):t._e(),1==t.pagestatus?o("v-uni-view",{staticClass:"body"},[t._v("输入新用户名"),o("v-uni-input",{staticClass:"uni-input",attrs:{focus:!0,placeholder:"请输入...."},model:{value:t.newname,callback:function(n){t.newname=n},expression:"newname"}}),o("v-uni-button",{staticClass:"sure1",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.back.apply(void 0,arguments)}}},[t._v("返回")]),o("v-uni-button",{staticClass:"sure",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.surename.apply(void 0,arguments)}}},[t._v("确认")])],1):t._e(),2==t.pagestatus?o("v-uni-view",{staticClass:"body"},[t._v("输入验证码"),o("v-uni-input",{staticClass:"uni-input",attrs:{focus:!0,placeholder:"请输入...."},model:{value:t.code,callback:function(n){t.code=n},expression:"code"}}),t._v("输入新密码"),o("v-uni-input",{staticClass:"uni-input",attrs:{focus:!0,placeholder:"请输入...."},model:{value:t.newpassword,callback:function(n){t.newpassword=n},expression:"newpassword"}}),t._v("请再次输入新密码"),o("v-uni-input",{staticClass:"uni-input",attrs:{focus:!0,placeholder:"请输入...."},model:{value:t.surenewpassword,callback:function(n){t.surenewpassword=n},expression:"surenewpassword"}}),1==t.error?o("p",{staticClass:"error"},[t._v(t._s(t.errorinfo))]):t._e(),o("v-uni-button",{staticClass:"sure2",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.send.apply(void 0,arguments)}}},[t._v("发送验证码")]),o("v-uni-button",{staticClass:"sure1",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.back.apply(void 0,arguments)}}},[t._v("返回")]),o("v-uni-button",{staticClass:"sure",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.surepassword.apply(void 0,arguments)}}},[t._v("确认")])],1):t._e(),o("v-uni-view",{staticClass:"bottom"},[o("v-uni-button",{attrs:{type:"warn"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.quit.apply(void 0,arguments)}}},[t._v("退出登录")])],1)],1)},e=[]},"3f71":function(t,n,a){"use strict";a.r(n);var o=a("1a7e"),e=a("a915");for(var i in e)["default"].indexOf(i)<0&&function(t){a.d(n,t,(function(){return e[t]}))}(i);a("8bb8");var s=a("f0c5"),r=Object(s["a"])(e["default"],o["b"],o["c"],!1,null,"642fd34a",null,!1,o["a"],void 0);n["default"]=r.exports},4746:function(t,n,a){var o=a("24fb");n=o(!1),n.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.content[data-v-642fd34a]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.content .background[data-v-642fd34a]{position:absolute;z-index:-1;border-radius:%?30?%;margin-top:%?0?%;height:%?1700?%;width:100%;opacity:.9}.content .top[data-v-642fd34a]{height:%?400?%;width:100%;display:flex;flex-direction:column}.content .top .topon[data-v-642fd34a]{height:%?200?%;width:100%;display:flex;justify-items:center;align-items:center}.content .top .topon .onleft[data-v-642fd34a]{height:%?150?%;width:%?150?%;background:red;border-radius:50%;margin-left:%?30?%}.content .top .topon .onleft uni-image[data-v-642fd34a]{height:%?150?%;width:%?150?%;border-radius:50%}.content .top .topon .onright[data-v-642fd34a]{margin-left:%?40?%}.content .top .topon .onright .name[data-v-642fd34a]{font-size:%?50?%}.content .top .topbottom[data-v-642fd34a]{height:%?200?%;width:100%;display:flex;flex-direction:column;align-items:center;justify-items:center}.content .top .topbottom .shishu[data-v-642fd34a]{margin-top:%?5?%;height:%?180?%;width:80%;background-color:hsla(0,0%,100%,.6);border-radius:%?50?%;box-shadow:6px 10px 10px #4f9fd3}.content .top .topbottom .shishu h2[data-v-642fd34a]{margin:%?20?% %?30?%}.content .top .topbottom .shishu .sum[data-v-642fd34a]{display:flex;justify-items:center;align-items:center;height:%?90?%;width:50%;-webkit-transform:translateX(%?340?%);transform:translateX(%?340?%)}.content .top .topbottom .shishu .sum .lj[data-v-642fd34a]{-webkit-transform:translatey(%?-60?%);transform:translatey(%?-60?%)}.content .top .topbottom .shishu .sum h2[data-v-642fd34a]{-webkit-transform:translatey(%?-30?%);transform:translatey(%?-30?%)}.content .body[data-v-642fd34a]{display:flex;flex-direction:column;height:%?800?%;width:%?600?%;background:hsla(0,0%,100%,.7);border-radius:%?30?%;border-right:%?5?% #55a2d3 solid;border-bottom:%?5?% #55a2d3 solid;border-left:%?5?% #55a2d3 solid;padding-left:%?60?%;box-sizing:border-box;padding-top:%?20?%;position:relative}.content .body .sure[data-v-642fd34a]{bottom:%?1?%;margin-left:%?-10?%;width:%?500?%;position:absolute}.content .body .sure1[data-v-642fd34a]{bottom:%?100?%;margin-left:%?-10?%;width:%?500?%;position:absolute}.content .body .sure2[data-v-642fd34a]{bottom:%?200?%;margin-left:%?-10?%;width:%?500?%;position:absolute}.content .body .error[data-v-642fd34a]{color:red}.content .body uni-input[data-v-642fd34a]{margin-top:%?20?%;margin-left:%?-30?%;height:%?80?%;width:%?500?%;background:#f6f6f6;padding-left:%?30?%;border-radius:%?20?%}.content .body .item[data-v-642fd34a]{margin-top:%?35?%;display:flex}.content .body .item p[data-v-642fd34a]{font-size:%?35?%}.content .body .item uni-button[data-v-642fd34a]{height:%?55?%;line-height:%?55?%;font-size:%?25?%}.content .bottom[data-v-642fd34a]{position:absolute;bottom:%?-150?%;height:%?150?%;width:100%;display:flex;justify-content:center;align-items:center}.content .bottom uni-button[data-v-642fd34a]{width:80%}',""]),t.exports=n},"57ae":function(t,n,a){var o=a("4746");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var e=a("4f06").default;e("5b143626",o,!0,{sourceMap:!1,shadowMode:!1})},"8bb8":function(t,n,a){"use strict";var o=a("57ae"),e=a.n(o);e.a},a915:function(t,n,a){"use strict";a.r(n);var o=a("aef4"),e=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){a.d(n,t,(function(){return o[t]}))}(i);n["default"]=e.a},aef4:function(t,n,a){"use strict";a("7a82"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){return{token:"",file:null,newpassword:"",surenewpassword:"",error:1,errorinfo:"",code:"",loginstatus:0,pagestatus:0,infodata:null,newname:"",headpicurl:"",user:{headpicurl:"../../static/user/headpic.jpg",userID:1e3,username:"xuee",userhours:20,userschool:"杭师大",useruid:2e3,usermajor:"软件工程",usercollege:"信科院",userpassword:"123456",userstate:2},applystatus:0,userinfo:null,formitem:["学校","账号","学号","学院","专业","密码"],applyfrom:[]}},onInit:function(){this.returninfo()},onLoad:function(){this.token=uni.getStorageSync("token"),this.returninfo(),console.log(uni.$u.config.v)},onShow:function(){this.token=uni.getStorageSync("token"),uni.getStorage({key:"token",success:function(t){this.token=t.data,console.log(t.data)}}),this.returninfo()},methods:{changeheadpic:function(){var t=this.token;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(n){console.log(n.tempFiles[0]);var a=n.tempFiles[0];console.log(a),console.log(t),uni.uploadFile({url:"http://124.220.40.115:82//sign/upload?Authorization="+t,filePath:a.path,name:"file",formData:{},success:function(t){var n;n=JSON.parse(t.data),console.log(n),"没有登录"==n.msg&&uni.navigateTo({url:"/pages/login/login"}),uni.showToast({title:"修改成功请等待头像审核",icon:"exception",duration:1e3}),uni.switchTab({url:"/pages/userinfo/userinfo"})},fail:function(t){console.log(2),console.log(t.data)}})}})},returninfo:function(){var t=this;console.log(this.token),uni.request({url:"http://124.220.40.115:82/volunteer/get_info",method:"POST",header:{Authorization:this.token,"content-type":"application/json;charset=UTF-8"},success:function(n){201==n.data.code&&uni.navigateTo({url:"/pages/login/login"}),t.headpicurl="http://124.220.40.115:82/uploadFile/"+n.data.data.id+".jpg",console.log(t.headpicurl),console.log(n.data),t.infodata=n.data.data,console.log(t.infodata)},fail:function(t){console.log(2),console.log(t.data)}}),uni.request({url:"http://124.220.40.115:82/user/get_info",method:"POST",header:{Authorization:this.token,"content-type":"application/json;charset=UTF-8"},success:function(n){201==n.data.code&&uni.navigateTo({url:"/pages/login/login"}),console.log(n.data),t.userinfo=n.data.data,console.log(t.userinfo)},fail:function(t){console.log(2),console.log(t.data)}})},changename:function(){this.pagestatus=1},changepassword:function(){this.pagestatus=2},surename:function(){var t=this;console.log(this.token),uni.request({url:"http://124.220.40.115:82/user/new_username",method:"POST",data:{new_username:this.newname},header:{Authorization:this.token,"content-type":"application/json;charset=UTF-8"},success:function(n){201==n.data.code?uni.navigateTo({url:"/pages/login/login"}):"修改成功"==n.data.msg?(uni.showToast({title:"修改成功",icon:"exception",duration:1e3}),t.newname="",t.returninfo(),t.pagestatus=0):"用户名已被占用"==n.data.msg&&uni.showToast({title:"用户名已被占用",icon:"error",duration:1e3}),console.log(n.data)},fail:function(t){console.log(2),console.log(t.data)}})},back:function(){this.pagestatus=0},send:function(){uni.request({url:"http://124.220.40.115:82/sign/send_email",method:"POST",data:{email:this.userinfo.email},header:{Authorization:this.token,"content-type":"application/json;charset=UTF-8"},success:function(t){201==t.data.code?uni.navigateTo({url:"/pages/login/login"}):uni.showToast({title:t.data.msg,icon:"exception",duration:1e3}),console.log(t.data)},fail:function(t){console.log(2),console.log(t.data)}})},quit:function(){var t=this;uni.request({url:"http://124.220.40.115:82/user/logout",method:"POST",header:{Authorization:this.token,"content-type":"application/json;charset=UTF-8"},success:function(n){(201==n.data.code||"退出成功"==n.data.msg)&&uni.navigateTo({url:"/pages/login/login"}),console.log(n.data),t.infodata=n.data.data,console.log(t.infodata)},fail:function(t){console.log(2),console.log(t.data)}})},surepassword:function(){var t=this;this.newpassword!=this.surenewpassword?(this.errorinfo="两次密码输入不一致",this.error=1):uni.request({url:"http://124.220.40.115:82/user/npwd",method:"POST",data:{code:this.code,npwd:this.surenewpassword},header:{Authorization:this.token,"content-type":"application/json;charset=UTF-8"},success:function(n){201==n.data.code?uni.navigateTo({url:"/pages/login/login"}):"修改成功"==n.data.msg?(uni.showToast({title:"修改成功",icon:"exception",duration:1e3}),t.pagestatus=0):(t.error=1,t.errorinfo=n.data.msg),console.log(n.data)},fail:function(t){console.log(2),console.log(t.data)}})}}};n.default=o},c3c8:function(t,n,a){t.exports=a.p+"static/img/backgroundmain.828efa36.jpg"}}]);